<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>10地点 GPS走行ログ AR</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- A-Frame -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <!-- ←ここをNFT版じゃなくて通常版にする -->
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

  <!-- デバッグ用コンソール -->
  <script src="https://cdn.jsdelivr.net/npm/eruda"></script>
  <script>eruda.init();</script>
</head>

<body style="margin: 0; overflow: hidden;">

  <a-scene
    vr-mode-ui="enabled: false"
    embedded
    arjs="sourceType: webcam; videoTexture: true; debugUIEnabled: false;"
    renderer="antialias: true; alpha: true;"
  >

    <!-- 家の中テスト用。実機の場所にしたいときはコメント外す -->
    <!-- <a-camera gps-camera rotation-reader></a-camera> -->
    <a-camera
      gps-camera="simulateLatitude: 38.10148128126027; simulateLongitude: 140.0433090680094;"
      rotation-reader
    ></a-camera>

    <!-- テスト：絶対に見えるはずの固定画像（これが見えたら描画OK） -->
    <a-image
      src="./Index/Picture/TasParkHotel.png"
      position="0 1.5 -3"
      width="2.5"
      height="1"
    ></a-image>

    <!-- ここからがGPSで出したい画像たち。最初は非表示 -->
    <a-image
      id="ar-point-1"
      src="./Index/Picture/TasParkHotel.png"
      gps-entity-place="latitude: 38.10148128126027; longitude: 140.0433090680094"
      scale="40 40 40"
      visible="false"
    ></a-image>

    <a-image
      id="ar-point-2"
      src="./Index/Picture/MichinoEkiNagai.png"
      gps-entity-place="latitude: 38.108970970886325; longitude: 140.04382939078403"
      scale="40 40 40"
      visible="false"
    ></a-image>

    <a-image
      id="ar-point-3"
      src="./Index/Picture/MNagaiShougakkou.png"
      gps-entity-place="latitude: 38.107796313044474; longitude: 140.04269068239356"
      scale="40 40 40"
      visible="false"
    ></a-image>

    <a-image
      id="ar-point-4"
      src="./Index/Picture/Kozakurakan.png"
      gps-entity-place="latitude: 38.110963329145335; longitude: 140.03632275489852"
      scale="40 40 40"
      visible="false"
    ></a-image>

    <a-image
      id="ar-point-5"
      src="./Index/Picture/Marudaiougiya.png"
      gps-entity-place="latitude: 38.11228246118919; longitude: 140.036198935986"
      scale="40 40 40"
      visible="false"
    ></a-image>

    <a-image
      id="ar-point-6"
      src="./Index/Picture/Nagaisiyakusho.png"
      gps-entity-place="latitude: 38.1063333593554; longitude: 140.033892868012"
      scale="40 40 40"
      visible="false"
    ></a-image>

    <a-image
      id="ar-point-7"
      src="./Index/Picture/NagaiKougyokoukou.png"
      gps-entity-place="latitude: 38.114426209437404; longitude: 140.03013087985815"
      scale="40 40 40"
      visible="false"
    ></a-image>

    <a-image
      id="ar-point-8"
      src="./Index/Picture/Nagaikoukou.png"
      gps-entity-place="latitude: 38.097283861825424; longitude: 140.0380452392042"
      scale="40 40 40"
      visible="false"
    ></a-image>

    <a-image
      id="ar-point-9"
      src="./Index/Picture/MinamiNagai.png"
      gps-entity-place="latitude: 38.09769549394771; longitude: 140.03458623775896"
      scale="40 40 40"
      visible="false"
    ></a-image>

    <a-image
      id="ar-point-10"
      src="./Index/Picture/Kurunt.png"
      gps-entity-place="latitude: 38.104867027791485; longitude: 140.03472544854446"
      scale="40 40 40"
      visible="false"
    ></a-image>

  </a-scene>

  <!-- 位置イベントが本当に飛んでいるか確認する用 -->
  <script>
    window.addEventListener('load', () => {
      const cam = document.querySelector('[gps-camera]');
      if (!cam) {
        console.warn('gps-camera が見つかりません');
        return;
      }
      cam.addEventListener('gps-camera-update-position', e => {
        console.log('位置イベント受信:', e.detail.position);
      });
    });
  </script>

  <!-- 本番ロジック -->
  <script src="./gps-ar.js"></script>
</body>
</html>
